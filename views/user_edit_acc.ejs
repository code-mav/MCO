<!DOCTYPE html>
<html lang="en">
  <%- include("./partials/user_head.ejs") %>
<body>
  <%- include("./partials/user_nav.ejs") %>
  <!-- User Account Editing Section -->
  <section id="editAccount" class="container user-section mt-4">
    <h1>Edit Account Details</h1>
    <hr>
    <% if (user) { %>
      <form action="/user/edit/<%= user._id %>?_method=PUT" method="POST">
        <div class="info">
          <i class="far fa-user-circle" id="profile"></i>
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">First Name</span>
            <input type="text" class="form-control" name="firstName" value="<%= user.firstName %>" required>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Last Name</span>
            <input type="text" class="form-control" name="lastName" value="<%= user.lastName %>" required>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Email</span>
            <input type="email" class="form-control" name="email" value="<%= user.email %>" required>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Address</span>
            <input type="text" class="form-control" name="address" value="<%= user.address %>" required>
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Password</span>
            <input type="password" class="form-control" name="password" placeholder="Leave blank if not changing">
          </div>
          <div class="input-group mb-3">
            <span class="input-group-text" id="basic-addon1">Confirm Password</span>
            <input type="password" class="form-control" name="confirmPassword" placeholder="Leave blank if not changing">
          </div>
        </div>
        <div class="form-check mb-3">
          <input class="form-check-input" type="checkbox" name="confirmInfo" id="flexCheckChecked" required>
          <label class="form-check-label" for="flexCheckChecked">
            Yes, all information is correct.
          </label>
        </div>
        <div class="mb-3">
          <a class="btn btn-outline-secondary" href="/user/profile/<%= user._id %>">Go to Profile</a>
          <button type="submit" class="btn btn-outline-success">Save Account Profile</button>
        </div>
      </form>
      <br>

      <!-- DELETE ACCOUNT FORM -->
      <form action="/user/edit/<%= user._id %>?_method=DELETE" method="POST" onsubmit="return confirm('Are you sure you want to delete your account?');">
        <button type="submit" class="btn btn-outline-danger">Delete Account</button>
      </form>
    <% } else { %>
      <p>No user data available.</p>
    <% } %>
  </section>
  
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="/js/script.js"></script>
</body>
</html>
